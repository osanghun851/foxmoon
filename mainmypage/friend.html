<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¹œêµ¬ ì¶”ê°€</title>
  <link href="https://fonts.googleapis.com/css2?family=Gugi&display=swap" rel="stylesheet">
  <style>
   * { margin:0; padding:0; box-sizing:border-box; }
#background{
position: relative;
height: 100dvh; /* í™”ë©´ ë†’ì´ì— ë”± ë§ì¶°ì„œ */
width: calc(100dvh * 9 / 16);
margin: 0 auto;
background-color: #E7D7C1;
}
#ì¹œêµ¬ê´€ë¦¬{
position: absolute;
left: calc((232/1920)*100dvh);
top: calc((73/1920)*100dvh);
width: calc((616/1920)*100dvh);
height: calc((120/1920)*100dvh);
font-size: calc((80/1920)*100dvh);
border-radius: calc((30/1920)*100dvh);
color: #FFFFFF;
background-color: #A05A2C;
line-height: 6.5dvh;
}
.textbox{
font-family: 'Gugi';
font-style: normal;
text-align: center;
}
#ì¹œêµ¬ìš”ì²­ë³´ë‚´ê¸°{
box-sizing: border-box;
position: absolute;
width: calc((800/1920)*100dvh);
height: calc((100/1920)*100dvh);
left: calc((140/1920)*100dvh);
top: calc((369/1920)*100dvh);
background: #EFE7DE;
border: 0.05dvh solid #212121;
box-shadow: 0dvh 0.2dvh 0.2dvh rgba(0, 0, 0, 0.25);
border-radius: calc((20/1920)*100dvh);
}
input::placeholder {
position: absolute;
left: 1.5dvh;
font-family: 'Gugi';
font-style: normal;
font-weight: 400;
font-size: calc((50/1920)*100dvh);
color: #BEC0C2;
}
#ê²€ìƒ‰ë²„íŠ¼{
position: absolute;
width: calc((60/1920)*100dvh);
height: auto;
left: calc((849/1920)*100dvh);
top: calc((389/1920)*100dvh);
}
#ë°›ì€ì¹œêµ¬ìš”ì²­{
position: absolute;
width: calc((278/1920)*100dvh);
height: calc((53/1920)*100dvh);
left: calc((85/1920)*100dvh);
top: calc((601/1920)*100dvh);
border-radius: calc((20/1920)*100dvh);
color: #FFFFFF;
font-size: calc((32/1920)*100dvh);
line-height: 3dvh;
background-color: #A05A2C;
}
#ë°›ì€ì¹œêµ¬ìš”ì²­box{
position: absolute;
width: calc((910/1920)*100dvh);
height: calc((394/1920)*100dvh);
left: calc((85/1920)*100dvh);
top: calc((700/1920)*100dvh);
border-radius: calc((20/1920)*100dvh);
background-color: #F4F1EC;
overflow-y: scroll;
}
#profile1{
position: absolute;
width: calc((100/1920)*100dvh);
height: auto;
left: calc((38/1920)*100dvh);
top: calc((34/1920)*100dvh);
}
#ë‚´ì¹œêµ¬ëª©ë¡{
position: absolute;
width: calc((278/1920)*100dvh);
height: calc((53/1920)*100dvh);
left: calc((85/1920)*100dvh);
top: calc((1181/1920)*100dvh);
border-radius: calc((20/1920)*100dvh);
color: #FFFFFF;
font-size: calc((32/1920)*100dvh);
line-height: 3dvh;
background-color: #A05A2C;
}
#ë‚´ì¹œêµ¬ëª©ë¡box{
position: absolute;
width: calc((910/1920)*100dvh);
height: calc((394/1920)*100dvh);
left: calc((85/1920)*100dvh);
top: calc((1280/1920)*100dvh);
border-radius: calc((20/1920)*100dvh);
background-color: #F4F1EC;
overflow-y: scroll;
}
#ëŒì•„ê°€ê¸°{
position: absolute;
width: auto;
height: 6.5dvh;
left: calc((885/1920)*100dvh);
top: calc((1715/1920)*100dvh);
}
.Modal{
display: none;
position: absolute;
z-index: 999;
left:0;
top:0;
width: 100%;
height: 100%;
background-color: rgba(0, 0, 0, 0.7);
}
#foxmodal-box{
position: fixed;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
width: calc(100dvh * 9 / 16);
height: 60dvh;
background-color: #E7D7C1;
}
#background0{
position: absolute;
width: calc((1080/1920)*100dvh);
height: auto;
z-index: 101;
}
#line{
position: absolute;
width: calc((1070/1920)*100dvh);
height: 0dvh;
left: 0dvh;
top: calc((714/1920)*100dvh);
border: 0.14dvh solid #D1916C;
}
#ì—¬ìš°ì§‘ëª¨ë‹¬ë‹«ê¸°{
position: absolute;
width: calc((75/1920)*100dvh);
height: auto;
left:calc((77/1920)*100dvh);
top:calc((92/1920)*100dvh);
z-index: 102;
}
#box1{
width: 100%;
height: calc((722/1920)*100dvh);
position: absolute;
bottom: 0px;
background-color: #D1916C;
}
#box2{
position: absolute;
width: calc((976/1920)*100dvh);
height: calc((625/1920)*100dvh);
left: calc((52/1920)*100dvh);
top: calc((50/1920)*100dvh);
background-color: #FFFFFF;
border-radius: calc((42/1920)*100dvh);
}
#ë²½ì§€{
position: absolute;
top: 0dvh;
left: 0dvh;
width: calc((1080/1920)*100dvh);
height: calc((713/1920)*100dvh);
z-index: 0;
}
#ì¹´í«{
position: absolute;
top: calc((903/1920)*100dvh);
left: calc((224/1920)*100dvh);
width: calc((631/1920)*100dvh);
height: calc((114/1920)*100dvh);
}
#friendName{
position: absolute;
width: calc((308/1920)*100dvh);
height: calc((146/1920)*100dvh);
left: calc((390/1920)*100dvh);
top: calc((81/1920)*100dvh);
font-family: 'Gugi';
font-style: normal;
font-weight: 400;
font-size: calc((70/1920)*100dvh);
display: flex;
justify-content: center;
align-items: center;
color: #FFFFFF;
z-index: 1000;
}
#fox{
position: absolute;
top: calc((550/1920)*100dvh);
left: calc((369/1920)*100dvh);
width: calc((368/1920)*100dvh);
height: calc((439/1920)*100dvh);
z-index: 101;
}

  </style>
</head>
<body>
  <div id="background">
    <div id="ì¹œêµ¬ê´€ë¦¬" class="textbox">ì¹œêµ¬ ê´€ë¦¬</div>
    <input id="ì¹œêµ¬ìš”ì²­ë³´ë‚´ê¸°" type="text" placeholder="ì¹œêµ¬ ìš”ì²­ ë³´ë‚´ê¸°">
    <img src="./ê²€ìƒ‰ë²„íŠ¼.svg" id="ê²€ìƒ‰ë²„íŠ¼">
    <div id="ë°›ì€ì¹œêµ¬ìš”ì²­" class="textbox">ë°›ì€ ì¹œêµ¬ ìš”ì²­</div>
    <div id="ë°›ì€ì¹œêµ¬ìš”ì²­box">
      <img src="./profile.svg" id="profile1">
    </div>
    <div id="ë‚´ì¹œêµ¬ëª©ë¡" class="textbox">ë‚´ ì¹œêµ¬ ëª©ë¡</div>
    <div id="ë‚´ì¹œêµ¬ëª©ë¡box"></div>
    <img src="./button.svg" id="ëŒì•„ê°€ê¸°">
  </div>
  <!--ì—¬ìš°ì§‘ ëª¨ë‹¬ ì°½-->
        <div id="foxhouse" class="Modal">
            <div id="foxmodal-box">
                <img src="foxhousebackground1.svg" id="background0">
                <img src="fox.svg" id="fox">
                <div id="line"></div>
                <div id="friendName"></div>
                <img src="foxhousebutton.svg" id="ì—¬ìš°ì§‘ëª¨ë‹¬ë‹«ê¸°" class="button">
                <img id="ë²½ì§€" data-itemName="undefined">
                <img src="ì¹´í«T.svg" id="ì¹´í«" data-itemName="undefined">
                <img id="ê°€êµ¬11" data-itemName="undefined">
                <img id="ê°€êµ¬12" data-itemName="undefined">
                <img id="ê°€êµ¬13" data-itemName="undefined">
                <img id="ê°€êµ¬14" data-itemName="undefined">
                <img id="ê°€êµ¬21" data-itemName="undefined">
                <img id="ê°€êµ¬22" data-itemName="undefined">
                <img id="ê°€êµ¬23" data-itemName="undefined">
                <img id="ê°€êµ¬24" data-itemName="undefined">
                <img id="ì•…ì„¸ì‚¬ë¦¬1" data-itemName="undefined">
                <img id="ì•…ì„¸ì‚¬ë¦¬2" data-itemName="undefined">
                <img id="ì•…ì„¸ì‚¬ë¦¬3" data-itemName="undefined">
                <img id="ì•…ì„¸ì‚¬ë¦¬4" data-itemName="undefined">
            </div>
        </div>
  <script>
    const BACKEND_URL="https://foxmoonbackend.onrender.com"
//buttoníš¨ê³¼ ì„¤ì •
const setButton=function(btn,brightness=1.2,scale=0.95){
    
    //ì´ˆê¸°ì„¤ì •
    Object.assign(btn.style, {
      cursor: "pointer",
      transition: "all 0.2s ease"
    });

      //hoveríš¨ê³¼
    btn.addEventListener("mouseenter",function(){
        btn.style.filter=`brightness(${brightness})`;
    });
    btn.addEventListener("mouseleave",function(){
        btn.style.filter="brightness(1)";
    });

    //activeíš¨ê³¼
    btn.addEventListener("mousedown",function(){
        btn.style.transform= `scale(${scale})`;
    });
    btn.addEventListener("mouseup",function(){
        btn.style.transform= "scale(1)";
    });
}
setButton(document.getElementById("ëŒì•„ê°€ê¸°"),1.2,0.9);
document.getElementById("ëŒì•„ê°€ê¸°").addEventListener('click',() =>{
  window.location.href = "./foxhome.html";
});
setButton(document.getElementById("ê²€ìƒ‰ë²„íŠ¼"),1.2,0.9);
    // ì¹œêµ¬ ìš”ì²­ ë³´ë‚´ê¸°
    async function sendFriendRequest() {
  const friendName = document.getElementById("ì¹œêµ¬ìš”ì²­ë³´ë‚´ê¸°").value;
  if (!friendName) {
    return alert("ì¹œêµ¬ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.");
  }

  try {
    const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/request", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… í† í° í¬í•¨
  },
  body: JSON.stringify({ friendName })
});

    // ì„œë²„ ì‘ë‹µ ìƒíƒœ í™•ì¸
    if (!res.ok) {
      const errorText = await res.text(); // ì„œë²„ì—ì„œ JSONì´ ì•„ë‹ ìˆ˜ë„ ìˆìŒ
      throw new Error(errorText || "ì„œë²„ ìš”ì²­ ì‹¤íŒ¨");
    }

    const data = await res.json();
    alert(data.message || "ì¹œêµ¬ ìš”ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
  } catch (err) {
    console.error("ì¹œêµ¬ ìš”ì²­ ì¤‘ ì˜¤ë¥˜:", err);
    alert("ì¹œêµ¬ ìš”ì²­ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + err.message);
  }
}

    // ë°›ì€ ìš”ì²­ ê°€ì ¸ì˜¤ê¸°
    async function loadFriendRequests() {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/requests", {
  method: "GET",
  headers: {
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  }
});
  const data = await res.json();

  const requestsDiv = document.getElementById("ë°›ì€ì¹œêµ¬ìš”ì²­box");
  requestsDiv.innerHTML = "";

  data.requests.forEach(req => {
    const div = document.createElement("div");
    div.className = "request-item";
    div.innerHTML = `
      <img src="./profile.svg" style="
        position: relative;
        top: 1.5dvh;
        left: 0.5dvh;
        width: calc((100/1920)*100dvh);
        height: calc((100/1920)*100dvh);
      ">
      ${req.username}
      <button onclick="acceptRequest('${req.username}')" style="
        width: calc((130/1920)*100dvh);
        height: calc((91/1920)*100dvh);
        background: rgba(52, 180, 30, 0.56);
        border: 0.05dvh solid #212121;
        border-radius: 1dvh;
        font-family: 'Gugi';
        font-weight: 400;
        font-size: calc((40/1920)*100dvh);
        line-height: calc((40/1920)*100dvh);
        color: black;
      ">ìˆ˜ë½</button>
      <button onclick="rejectRequest('${req.username}')" style="
        width: calc((130/1920)*100dvh);
        height: calc((91/1920)*100dvh);
        background: rgba(255,27,27,0.56);
        border: 0.05dvh solid #212121;
        border-radius: 1dvh;
        font-family: 'Gugi';
        font-weight: 400;
        font-size: calc((40/1920)*100dvh);
        line-height: calc((40/1920)*100dvh);
        color: black;
      ">ê±°ì ˆ</button>
    `;
    requestsDiv.appendChild(div);
  });
}


    // ìš”ì²­ ìˆ˜ë½
    async function acceptRequest(friendName) {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/accept", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  },
  body: JSON.stringify({ friendName })
});

      const data = await res.json();
      alert(data.message);
      loadFriendRequests();
      loadFriends();
    }

    // ìš”ì²­ ê±°ì ˆ
    async function rejectRequest(friendName) {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/reject", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  },
  body: JSON.stringify({ friendName })
});
      const data = await res.json();
      alert(data.message);
      loadFriendRequests();
    }

    // ë‚´ ì¹œêµ¬ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    async function loadFriends() {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/requests", {
  method: "GET",
  headers: {
    "Authorization": `Bearer ${token}`, // âœ… JWT ì „ë‹¬
    "Content-Type": "application/json"
  }
});
console.log("ì‘ë‹µ ìƒíƒœ:", res.status);

let data;
try {
  data = await res.json();
  console.log("ì‘ë‹µ JSON:", data);
} catch (err) {
  const text = await res.text();
  console.log("ì‘ë‹µ ë³¸ë¬¸(í…ìŠ¤íŠ¸):", text);
  return;
}

const friends = data?.friends || data?.requests || [];
console.log("ğŸ“‹ ë¶ˆëŸ¬ì˜¨ ì¹œêµ¬ ëª©ë¡:", friends);

const friendsUl = document.getElementById("ë‚´ì¹œêµ¬ëª©ë¡box");
friendsUl.innerHTML = "";

if (friends.length === 0) {
  friendsUl.innerHTML = "<p style='color:gray;'>ì¹œêµ¬ ëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
  return;
}

// âœ… username ì¶œë ¥ìœ¼ë¡œ ìˆ˜ì •
friends.forEach(friend => {
  const name = typeof friend === "string" ? friend : friend.username;

  const div = document.createElement("div");
  div.className = "request-item";
  div.innerHTML = `
    <img src="./profile.svg" style="
      position: relative;
      top: 1.5dvh;
      left: 0.5dvh;
      width: calc((100/1920)*100dvh);
      height: calc((100/1920)*100dvh);
    ">
    ${name}
    <img src="./gift.svg" onclick="giftFriends('${name}')" style="
      position: relative;
      top: 1.5dvh;
      left: 0.5dvh;
      width: calc((100/1920)*100dvh);
      height: calc((100/1920)*100dvh);
    ">
    <img src="./visit.svg" onclick="visitFriends('${name}')" style="
      position: relative;
      top: 1.5dvh;
      left: 0.5dvh;
      width: calc((100/1920)*100dvh);
      height: calc((100/1920)*100dvh);
    ">
    <img src="./delete.svg" onclick="deleteFriend('${name}')" style="
      position: relative;
      top: 1.5dvh;
      left: 0.5dvh;
      width: calc((100/1920)*100dvh);
      height: calc((100/1920)*100dvh);
    ">
  `;
  friendsUl.appendChild(div);
});

}

    //ì„ ë¬¼í•˜ê¸° í•¨ìˆ˜
    async function giftFriends(friendName) {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/gift", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  },
  body: JSON.stringify({ friendName })
});
      const data = await res.json();
      alert(data.message);
    }
    //foxhomeDataë¡œë“œ foxhome.htmlì˜ 895~918
    const ê°€êµ¬1Data = {
    ê°€êµ¬10:['11.4dvh','11.4dvh','6.4dvh','10.9dvh'],
    ê°€êµ¬11:['9.6dvh','9.6dvh','8.2dvh','12.5dvh'],
    ê°€êµ¬12:['8.3dvh','6.4dvh','32.3dvh','17.8dvh'],
    ê°€êµ¬13:['5.1dvh','6.5dvh','32.3dvh','17.8dvh'],
    ê°€êµ¬14:['17.2dvh','15.9dvh','37.6dvh','26.2dvh'],
    ê°€êµ¬15:['5.5dvh','14.3dvh','25.6dvh','10.1dvh']
};

const ê°€êµ¬2Data = {
    ê°€êµ¬20:['4dvh','6.8dvh','40.5dvh','20.1dvh'],
    ê°€êµ¬21:['4.6dvh','6.4dvh','41dvh','20.5dvh'],
    ê°€êµ¬22:['5.5dvh','7.9dvh','3dvh','48dvh'],
    ê°€êµ¬23:['5.1dvh','7.2dvh','3dvh','48dvh'],
    ê°€êµ¬24:['21.1dvh','12.2dvh','0dvh','30.4dvh'],
    ê°€êµ¬25:['3.7dvh','9.5dvh','46dvh','17.18dvh']
};

const ì•…ì„¸ì‚¬ë¦¬Data = {
    ì•…ì„¸ì‚¬ë¦¬0:['4.3dvh','3.2dvh','21dvh','33.6dvh','-62.32deg'],
    ì•…ì„¸ì‚¬ë¦¬1:['2.3dvh','2.3dvh','25dvh','29dvh','0deg'],
    ì•…ì„¸ì‚¬ë¦¬2:['3.4dvh','1.8dvh','21.6dvh','35.3dvh','0deg'],
    ì•…ì„¸ì‚¬ë¦¬3:['10.1dvh','8.2dvh','20.1dvh','33.3dvh','-4.84deg'],
    ì•…ì„¸ì‚¬ë¦¬4:['9.8dvh','9dvh','19dvh','33.3dvh','0deg'],
    ì•…ì„¸ì‚¬ë¦¬5:['5.2dvh','2.2dvh','21.5dvh','28.8dvh','0deg']
};

    //ë†€ëŸ¬ê°€ê¸° í•¨ìˆ˜
    async function visitFriends(friendName) {
      try {
        const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const response = await fetch(BACKEND_URL + "/friends/foxhomeData", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  },
  body: JSON.stringify({ friendName })
});


    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(errorData.message || "ì„œë²„ ì˜¤ë¥˜");
    }

    const data = await response.json();
    alert(data.username+"ì˜ ì§‘ì„ ë°©ë¬¸í•©ë‹ˆë‹¤!");
    console.log(data.foxhomeData);   // foxhomeData
    //foxhomeDataë¡œë“œ foxhome.htmlì˜ 941~1083
        if (data.foxhomeData["ë²½ì§€"] !== "undefined"){
        document.getElementById("ë²½ì§€").src = `./${data.foxhomeData["ë²½ì§€"]}T.svg`;
        document.getElementById("ë²½ì§€").dataset.itemName = data.foxhomeData["ë²½ì§€"];
        }
        //console.log(document.getElementById("ë²½ì§€").dataset.itemName);
        document.getElementById("ì¹´í«").src = `./${data.foxhomeData["ì¹´í«"]}T.svg`;
        document.getElementById("ì¹´í«").dataset.itemName = data.foxhomeData["ì¹´í«"];
        //console.log(document.getElementById("ì¹´í«").dataset.itemName);
        if(data.foxhomeData["ê°€êµ¬1"].split(",")[0] !== 'undefined'){
        document.getElementById("ê°€êµ¬11").src = `./${data.foxhomeData["ê°€êµ¬1"].split(",")[0]}T.svg`;
        document.getElementById("ê°€êµ¬11").dataset.itemName = data.foxhomeData["ê°€êµ¬1"].split(",")[0];
        document.getElementById("ê°€êµ¬11").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[0]][0]};
        height: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[0]][1]};
        left: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[0]][2]};
        top: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[0]][3]};
        z-index:100;
        `;};
        if (data.foxhomeData["ê°€êµ¬1"].split(",")[1] !== 'undefined'){
        document.getElementById("ê°€êµ¬12").src = `./${data.foxhomeData["ê°€êµ¬1"].split(",")[1]}T.svg`;
        document.getElementById("ê°€êµ¬12").dataset.itemName = data.foxhomeData["ê°€êµ¬1"].split(",")[1];
        document.getElementById("ê°€êµ¬12").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[1]][0]};
        height: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[1]][1]};
        left: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[1]][2]};
        top: ${ê°€êµ¬1Data[data.foxhomeData["ê°€êµ¬1"].split(",")[1]][3]};
        z-index:100;
        `;};
        if (data.foxhomeData["ê°€êµ¬1"].split(",")[2] !== 'undefined'){
        document.getElementById("ê°€êµ¬13").src = `./${data.foxhomeData["ê°€êµ¬1"].split(",")[2]}T.svg`;
        document.getElementById("ê°€êµ¬13").dataset.itemName = data.foxhomeData["ê°€êµ¬1"].split(",")[2];
        document.getElementById("ê°€êµ¬13").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬1Data["ê°€êµ¬14"][0]};
        height: ${ê°€êµ¬1Data["ê°€êµ¬14"][1]};
        left: ${ê°€êµ¬1Data["ê°€êµ¬14"][2]};
        top: ${ê°€êµ¬1Data["ê°€êµ¬14"][3]};
        z-index:99;
        `;};
        if (data.foxhomeData["ê°€êµ¬1"].split(",")[3] == 'ê°€êµ¬15'){
        document.getElementById("ê°€êµ¬14").src = `./${"ê°€êµ¬15"}T.svg`;
        document.getElementById("ê°€êµ¬14").dataset.itemName = "ê°€êµ¬15";
        document.getElementById("ê°€êµ¬14").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬1Data["ê°€êµ¬15"][0]};
        height: ${ê°€êµ¬1Data["ê°€êµ¬15"][1]};
        left: ${ê°€êµ¬1Data["ê°€êµ¬15"][2]};
        top: ${ê°€êµ¬1Data["ê°€êµ¬15"][3]};
        z-index:100;
        `;};
        if(data.foxhomeData["ê°€êµ¬2"].split(",")[0] !== 'undefined'){
        document.getElementById("ê°€êµ¬21").src = `./${data.foxhomeData["ê°€êµ¬2"].split(",")[0]}T.svg`;
        document.getElementById("ê°€êµ¬21").dataset.itemName = data.foxhomeData["ê°€êµ¬2"].split(",")[0];
        document.getElementById("ê°€êµ¬21").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[0]][0]};
        height: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[0]][1]};
        left: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[0]][2]};
        top: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[0]][3]};
        z-index:100;
        `;};
        if (data.foxhomeData["ê°€êµ¬2"].split(",")[1] !== 'undefined'){
        document.getElementById("ê°€êµ¬22").src = `./${data.foxhomeData["ê°€êµ¬2"].split(",")[1]}T.svg`;
        document.getElementById("ê°€êµ¬22").dataset.itemName = data.foxhomeData["ê°€êµ¬2"].split(",")[1];
        document.getElementById("ê°€êµ¬22").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[1]][0]};
        height: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[1]][1]};
        left: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[1]][2]};
        top: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[1]][3]};
        z-index:100;
        `;};
        if (data.foxhomeData["ê°€êµ¬2"].split(",")[2] !== 'undefined'){
        document.getElementById("ê°€êµ¬23").src = `./${data.foxhomeData["ê°€êµ¬2"].split(",")[2]}T.svg`;
        document.getElementById("ê°€êµ¬23").dataset.itemName = data.foxhomeData["ê°€êµ¬2"].split(",")[2];
        document.getElementById("ê°€êµ¬23").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[2]][0]};
        height: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[2]][1]};
        left: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[2]][2]};
        top: ${ê°€êµ¬2Data[data.foxhomeData["ê°€êµ¬2"].split(",")[2]][3]};
        z-index:100;
        `;};
        if (data.foxhomeData["ê°€êµ¬2"].split(",")[3] == 'ê°€êµ¬25'){
        document.getElementById("ê°€êµ¬24").src = `./${"ê°€êµ¬25"}T.svg`;
        document.getElementById("ê°€êµ¬24").dataset.itemName = "ê°€êµ¬25";
        document.getElementById("ê°€êµ¬24").style.cssText = `
        position: absolute;
        width: ${ê°€êµ¬2Data["ê°€êµ¬25"][0]};
        height: ${ê°€êµ¬2Data["ê°€êµ¬25"][1]};
        left: ${ê°€êµ¬2Data["ê°€êµ¬25"][2]};
        top: ${ê°€êµ¬2Data["ê°€êµ¬25"][3]};
        z-index:100;
        `;};
        if(data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0] !== 'undefined'){
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬1").src = `./${data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]}T.svg`;
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬1").dataset.itemName = data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0];
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬1").style.cssText = `
        position: absolute;
        width: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]][0]};
        height: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]][1]};
        left: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]][2]};
        top: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]][3]};
        transform:rotate(${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[0]][4]});
        z-index:102;
        `;};
        if (data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1] !== 'undefined'){
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬2").src = `./${data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1]}T.svg`;
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬2").dataset.itemName = data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1];
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬2").style.cssText = `
        position: absolute;
        width: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1]][0]};
        height: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1]][1]};
        left: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1]][2]};
        top: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[1]][3]};
        z-index:102;
        `;};
        if (data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2] !== 'undefined'){
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬3").src = `./${data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]}T.svg`;
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬3").dataset.itemName = data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2];
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬3").style.cssText = `
        position: absolute;
        width: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]][0]};
        height: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]][1]};
        left: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]][2]};
        top: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]][3]};
        transform:rotate(${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[2]][4]});
        z-index:102;
        `;};
        if (data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3] !== 'undefined'){
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬4").src = `./${data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3]}T.svg`;
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬4").dataset.itemName = data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3];
        document.getElementById("ì•…ì„¸ì‚¬ë¦¬4").style.cssText = `
        position: absolute;
        width: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3]][0]};
        height: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3]][1]};
        left: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3]][2]};
        top: ${ì•…ì„¸ì‚¬ë¦¬Data[data.foxhomeData["ì•…ì„¸ì‚¬ë¦¬"].split(",")[3]][3]};
        z-index:102;
        `;};
  } catch (err) {
    console.error("ì¹œêµ¬ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:", err.message);
    console.error(err);
  }
const foxhousemodal = document.getElementById('foxhouse');
const closeBtn1 = document.querySelector('#ì—¬ìš°ì§‘ëª¨ë‹¬ë‹«ê¸°');
document.getElementById('friendName').innerText=friendName;
foxhousemodal.style.display = 'block';
closeBtn1.onclick = async function() {
  foxhousemodal.style.display = "none";
}
    }
    //ì¹œêµ¬ì‚­ì œ í•¨ìˆ˜
    async function deleteFriend(friendName) {
      const token = localStorage.getItem("token"); // ë¡œê·¸ì¸ ì‹œ ì €ì¥ëœ JWT

const res = await fetch(BACKEND_URL + "/friends/delete", {
  method: "DELETE",
  headers: {
    "Content-Type": "application/json",
    "Authorization": `Bearer ${token}` // âœ… JWT í† í° ì „ë‹¬
  },
  body: JSON.stringify({ friendName })
});

      const data = await res.json();
      alert(data.message);
      loadFriends();
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    loadFriendRequests();
    loadFriends();
    document.getElementById("ê²€ìƒ‰ë²„íŠ¼").addEventListener("click",()=>{
      sendFriendRequest();
    });
  </script>
</body>
</html>
